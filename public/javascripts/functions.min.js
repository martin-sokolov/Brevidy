var brevidy={};$.ajaxSetup({timeout:90000});
/*!
 * ==========================================================
 * bootstrap-twipsy.js v1.4.0
 * http://twitter.github.com/bootstrap/javascript.html#twipsy
 * Adapted from the original jQuery.tipsy by Jason Frame
 * ==========================================================
 * Copyright 2011 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(c){var a;c(document).ready(function(){c.support.transition=(function(){var f=document.body||document.documentElement,g=f.style,e=g.transition!==undefined||g.WebkitTransition!==undefined||g.MozTransition!==undefined||g.MsTransition!==undefined||g.OTransition!==undefined;return e})();if(c.support.transition){a="TransitionEnd";if(c.browser.webkit){a="webkitTransitionEnd"}else{if(c.browser.mozilla){a="transitionend"}else{if(c.browser.opera){a="oTransitionEnd"}}}}});var d=function(f,e){this.$element=c(f);this.options=e;this.enabled=true;this.fixTitle()};d.prototype={show:function(){var j,f,i,e,h,g;if(this.hasContent()&&this.enabled){h=this.tip();this.setContent();if(this.options.animate){h.addClass("fade")}h.remove().css({top:0,left:0,display:"block"}).prependTo(document.body);j=c.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight});f=h[0].offsetWidth;i=h[0].offsetHeight;e=b(this.options.placement,this,[h[0],this.$element[0]]);switch(e){case"below":g={top:j.top+j.height+this.options.offset,left:j.left+j.width/2-f/2};break;case"above":g={top:j.top-i-this.options.offset,left:j.left+j.width/2-f/2};break;case"left":g={top:j.top+j.height/2-i/2,left:j.left-f-this.options.offset};break;case"right":g={top:j.top+j.height/2-i/2,left:j.left+j.width+this.options.offset};break}h.css(g).addClass(e).addClass("in")}},setContent:function(){var e=this.tip();e.find(".twipsy-inner")[this.options.html?"html":"text"](this.getTitle());e[0].className="twipsy"},hide:function(){var f=this,g=this.tip();g.removeClass("in");function e(){g.remove()}c.support.transition&&this.$tip.hasClass("fade")?g.bind(a,e):e()},fixTitle:function(){var e=this.$element;if(e.attr("title")||typeof(e.attr("data-original-title"))!="string"){e.attr("data-original-title",e.attr("title")||"").removeAttr("title")}},hasContent:function(){return this.getTitle()},getTitle:function(){var g,e=this.$element,f=this.options;this.fixTitle();if(typeof f.title=="string"){g=e.attr(f.title=="title"?"data-original-title":f.title)}else{if(typeof f.title=="function"){g=f.title.call(e[0])}}g=(""+g).replace(/(^\s*|\s*$)/,"");return g||f.fallback},tip:function(){return this.$tip=this.$tip||c('<div class="twipsy" />').html(this.options.template)},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}};function b(g,e,f){return typeof g=="function"?g.apply(e,f):g}c.fn.twipsy=function(e){c.fn.twipsy.initWith.call(this,e,d,"twipsy");return this};c.fn.twipsy.initWith=function(n,j,e){var m,l,h,g;if(n===true){return this.data(e)}else{if(typeof n=="string"){m=this.data(e);if(m){m[n]()}return this}}n=c.extend({},c.fn[e].defaults,n);function f(p){var o=c.data(p,e);if(!o){o=new j(p,c.fn.twipsy.elementOptions(p,n));c.data(p,e,o)}return o}function i(){var o=f(this);o.hoverState="in";if(n.delayIn==0){o.show()}else{o.fixTitle();setTimeout(function(){if(o.hoverState=="in"){o.show()}},n.delayIn)}}function k(){var o=f(this);o.hoverState="out";if(n.delayOut==0){o.hide()}else{setTimeout(function(){if(o.hoverState=="out"){o.hide()}},n.delayOut)}}if(!n.live){this.each(function(){f(this)})}if(n.trigger!="manual"){l=n.live?"live":"bind";h=n.trigger=="hover"?"mouseenter":"focus";g=n.trigger=="hover"?"mouseleave":"blur";this[l](h,i)[l](g,k)}return this};c.fn.twipsy.Twipsy=d;c.fn.twipsy.defaults={animate:true,delayIn:0,delayOut:0,fallback:"",placement:"above",html:false,live:true,offset:0,title:"title",trigger:"hover",template:'<div class="twipsy-arrow"></div><div class="twipsy-inner"></div>'};c.fn.twipsy.rejectAttrOptions=["title"];c.fn.twipsy.elementOptions=function(j,f){var h=c(j).data(),e=c.fn.twipsy.rejectAttrOptions,g=e.length;while(g--){delete h[e[g]]}return c.extend({},f,h)}}(window.jQuery||window.ender);
/*!
 * =========================================================
 * bootstrap-modal.js v1.4.0
 * http://twitter.github.com/bootstrap/javascript.html#modal
 * =========================================================
 * Copyright 2011 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
!function(f){var b;f(document).ready(function(){f.support.transition=(function(){var j=document.body||document.documentElement,k=j.style,i=k.transition!==undefined||k.WebkitTransition!==undefined||k.MozTransition!==undefined||k.MsTransition!==undefined||k.OTransition!==undefined;return i})();if(f.support.transition){b="TransitionEnd";if(f.browser.webkit){b="webkitTransitionEnd"}else{if(f.browser.mozilla){b="transitionend"}else{if(f.browser.opera){b="oTransitionEnd"}}}}});var a=function(j,i){this.settings=f.extend({},f.fn.modal.defaults,i);this.$element=f(j).delegate(".close","click.modal",f.proxy(this.hide,this));if(this.settings.show){this.show()}return this};a.prototype={toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var i=this;this.isShown=true;this.$element.trigger("show");e.call(this);d.call(this,function(){var j=f.support.transition&&i.$element.hasClass("fade");i.$element.appendTo(document.body).show();if(j){i.$element[0].offsetWidth}i.$element.addClass("in");j?i.$element.one(b,function(){i.$element.trigger("shown")}):i.$element.trigger("shown")});return this},hide:function(j){j&&j.preventDefault();if(!this.isShown){return this}var i=this;this.isShown=false;e.call(this);this.$element.trigger("hide").removeClass("in");f.support.transition&&this.$element.hasClass("fade")?h.call(this):g.call(this);return this}};function h(){var i=this,j=setTimeout(function(){i.$element.unbind(b);g.call(i)},500);this.$element.one(b,function(){clearTimeout(j);g.call(i)})}function g(i){this.$element.hide().trigger("hidden");d.call(this)}function d(l){var k=this,j=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.settings.backdrop){var i=f.support.transition&&j;this.$backdrop=f('<div class="modal-backdrop '+j+'" />').appendTo(document.body);if(this.settings.backdrop!="static"){this.$backdrop.click(f.proxy(this.hide,this))}if(i){this.$backdrop[0].offsetWidth}this.$backdrop.addClass("in");i?this.$backdrop.one(b,l):l()}else{if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");f.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(b,f.proxy(c,this)):c.call(this)}else{if(l){l()}}}}function c(){this.$backdrop.remove();this.$backdrop=null}function e(){var i=this;if(this.isShown&&this.settings.keyboard){f(document).bind("keyup.modal",function(j){if(j.which==27){i.hide()}})}else{if(!this.isShown){f(document).unbind("keyup.modal")}}}f.fn.modal=function(i){var j=this.data("modal");if(!j){if(typeof i=="string"){i={show:/show|toggle/.test(i)}}return this.each(function(){f(this).data("modal",new a(this,i))})}if(i===true){return j}if(typeof i=="string"){j[i]()}else{if(j){j.toggle()}}return this};f.fn.modal.Modal=a;f.fn.modal.defaults={backdrop:false,keyboard:false,show:false};f(document).ready(function(){f("body").delegate("[data-controls-modal]","click",function(j){j.preventDefault();var i=f(this).data("show",true);f("#"+i.attr("data-controls-modal")).modal(i.data())})})}(window.jQuery||window.ender);
/*!
 * ========================================================
 * bootstrap-tabs.js v1.4.0
 * http://twitter.github.com/bootstrap/javascript.html#tabs
 * ========================================================
 * Copyright 2011 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ======================================================== */
!function(c){function b(f,d){var e=false;var g=c("#progress-bar");if(f.attr("id")=="upload-image"){e=true}else{if(g.is(":visible")){if((g).children(".progress").hasClass("error")){e=true}}else{e=true}}if(e){if(f.attr("id")=="upload-image"){c(".plupload").css("display","block")}else{c(".plupload").css("display","none")}d.find("> .active").removeClass("active").find("> .dropdown-menu > .active").removeClass("active");f.addClass("active");if(f.parent(".dropdown-menu")){f.closest("li.dropdown").addClass("active")}}}function a(i){var h=c(this),f=h.closest("ul:not(.dropdown-menu)"),d=h.attr("href"),g,j;if(/^#\w+/.test(d)){i.preventDefault();if(h.parent("li").hasClass("active")){return}g=f.find(".active a").last()[0];j=c(d);b(h.parent("li"),f);b(j,j.parent());h.trigger({type:"change",relatedTarget:g})}}c.fn.tabs=c.fn.pills=function(d){return this.each(function(){c(this).delegate(d||".tabs li > a, .pills > li > a","click",a)})};c(document).ready(function(){c("body").tabs("ul[data-tabs] li > a, ul[data-pills] > li > a")})}(window.jQuery||window.ender);
/*!
 * ===========================================================
 * bootstrap-popover.js v1.4.0
 * http://twitter.github.com/bootstrap/javascript.html#popover
 * ===========================================================
 * Copyright 2011 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =========================================================== */
!function(b){var a=function(d,c){this.$element=b(d);this.options=c;this.enabled=true;this.fixTitle()};a.prototype=b.extend({},b.fn.twipsy.Twipsy.prototype,{setContent:function(){var c=this.tip();c.find(".title")[this.options.html?"html":"text"](this.getTitle());c.find(".content p")[this.options.html?"html":"text"](this.getContent());c[0].className="popover"},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var d,c=this.$element,e=this.options;if(typeof this.options.content=="string"){d=c.attr(this.options.content)}else{if(typeof this.options.content=="function"){d=this.options.content.call(this.$element[0])}}return d},tip:function(){if(!this.$tip){this.$tip=b('<div class="popover" />').html(this.options.template)}return this.$tip}});b.fn.popover=function(c){if(typeof c=="object"){c=b.extend({},b.fn.popover.defaults,c)}b.fn.twipsy.initWith.call(this,c,a,"popover");return this};b.fn.popover.defaults=b.extend({},b.fn.twipsy.defaults,{placement:"right",content:"data-content",template:'<div class="arrow"></div><div class="inner"><h5 class="title"></h5><div class="content"><p></p></div></div>'});b.fn.twipsy.rejectAttrOptions.push("content")}(window.jQuery||window.ender);
/*!
 * Unobtrusive scripting adapter for jQuery
 *
 * Requires jQuery 1.4.4 or later.
 * https://github.com/rails/jquery-ujs

 * Uploading file using rails.js
 * =============================
 *
 * By default, browsers do not allow files to be uploaded via AJAX. As a result, if there are any non-blank file fields
 * in the remote form, this adapter aborts the AJAX submission and allows the form to submit through standard means.
 *
 * The `ajax:aborted:file` event allows you to bind your own handler to process the form submission however you wish.
 *
 * Ex:
 *     $('form').live('ajax:aborted:file', function(event, elements){
 *       // Implement own remote file-transfer handler here for non-blank file inputs passed in `elements`.
 *       // Returning false in this handler tells rails.js to disallow standard form submission
 *       return false;
 *     });
 *
 * The `ajax:aborted:file` event is fired when a file-type input is detected with a non-blank value.
 *
 * Third-party tools can use this hook to detect when an AJAX file upload is attempted, and then use
 * techniques like the iframe method to upload the file instead.
 *
 * Required fields in rails.js
 * ===========================
 *
 * If any blank required inputs (required="required") are detected in the remote form, the whole form submission
 * is canceled. Note that this is unlike file inputs, which still allow standard (non-AJAX) form submission.
 *
 * The `ajax:aborted:required` event allows you to bind your own handler to inform the user of blank required inputs.
 *
 * !! Note that Opera does not fire the form's submit event if there are blank required inputs, so this event may never
 *    get fired in Opera. This event is what causes other browsers to exhibit the same submit-aborting behavior.
 *
 * Ex:
 *     $('form').live('ajax:aborted:required', function(event, elements){
 *       // Returning false in this handler tells rails.js to submit the form anyway.
 *       // The blank required inputs are passed to this function in `elements`.
 *       return ! confirm("Would you like to submit the form with missing info?");
 *     });
 */
(function(b,c){var a;b.rails=a={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]",selectChangeSelector:"select[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",CSRFProtection:function(e){var d=b('meta[name="csrf-token"]').attr("content");if(d){e.setRequestHeader("X-CSRF-Token",d)}},fire:function(g,d,f){var e=b.Event(d);g.trigger(e,f);return e.result!==false},confirm:function(d){return confirm(d)},ajax:function(d){return b.ajax(d)},handleRemote:function(g){var j,e,i,h=g.data("cross-domain")||null,d=g.data("type")||(b.ajaxSettings&&b.ajaxSettings.dataType);if(a.fire(g,"ajax:before")){if(g.is("form")){j=g.attr("method");e=g.attr("action");i=g.serializeArray();var f=g.data("ujs:submit-button");if(f){i.push(f);g.data("ujs:submit-button",null)}}else{if(g.is("select")){j=g.data("method");e=g.data("url");i=g.serialize();if(g.data("params")){i=i+"&"+g.data("params")}}else{j=g.data("method");e=g.attr("href");i=g.data("params")||null}}options={type:j||"GET",data:i,dataType:d,crossDomain:h,beforeSend:function(l,k){if(k.dataType===c){l.setRequestHeader("accept","*/*;q=0.5, "+k.accepts.script)}return a.fire(g,"ajax:beforeSend",[l,k])},success:function(l,k,m){g.trigger("ajax:success",[l,k,m])},complete:function(l,k){g.trigger("ajax:complete",[l,k])},error:function(m,k,l){g.trigger("ajax:error",[m,k,l])}};if(e){b.extend(options,{url:e})}a.ajax(options)}},handleMethod:function(h){var e=h.attr("href"),j=h.data("method"),f=b("meta[name=csrf-token]").attr("content"),i=b("meta[name=csrf-param]").attr("content"),g=b('<form method="post" action="'+e+'"></form>'),d='<input name="_method" value="'+j+'" type="hidden" />';if(i!==c&&f!==c){d+='<input name="'+i+'" value="'+f+'" type="hidden" />'}g.hide().append(d).appendTo("body");g.submit()},disableFormElements:function(d){d.find(a.disableSelector).each(function(){var e=b(this),f=e.is("button")?"html":"val";e.data("ujs:enable-with",e[f]());e[f](e.data("disable-with"));e.attr("disabled","disabled")})},enableFormElements:function(d){d.find(a.enableSelector).each(function(){var e=b(this),f=e.is("button")?"html":"val";if(e.data("ujs:enable-with")){e[f](e.data("ujs:enable-with"))}e.removeAttr("disabled")})},allowAction:function(d){var e=d.data("confirm"),f=false,g;if(!e){return true}if(a.fire(d,"confirm")){f=a.confirm(e);g=a.fire(d,"confirm:complete",[f])}return f&&g},blankInputs:function(i,f,h){var e=b(),g,d=f||"input,textarea";i.find(d).each(function(){g=b(this);if(h?g.val():!g.val()){e=e.add(g)}});return e.length?e:false},nonBlankInputs:function(e,d){return a.blankInputs(e,d,true)},stopEverything:function(d){b(d.target).trigger("ujs:everythingStopped");d.stopImmediatePropagation();return false},callFormSubmitBindings:function(e){var d=e.data("events"),f=true;if(d!==c&&d.submit!==c){b.each(d.submit,function(g,h){if(typeof h.handler==="function"){return f=h.handler(h.data)}})}return f}};if("ajaxPrefilter" in b){b.ajaxPrefilter(function(d,f,e){if(!d.crossDomain){a.CSRFProtection(e)}})}else{b(document).ajaxSend(function(f,g,d){if(!d.crossDomain){a.CSRFProtection(g)}})}b(a.linkClickSelector).live("click.rails",function(f){var d=b(this);if(!a.allowAction(d)){return a.stopEverything(f)}if(d.data("remote")!==c){a.handleRemote(d);return false}else{if(d.data("method")){a.handleMethod(d);return false}}});b(a.selectChangeSelector).live("change.rails",function(f){var d=b(this);if(!a.allowAction(d)){return a.stopEverything(f)}a.handleRemote(d);return false});b(a.formSubmitSelector).live("submit.rails",function(i){var g=b(this),h=g.data("remote")!==c,f=a.blankInputs(g,a.requiredInputSelector),d=a.nonBlankInputs(g,a.fileInputSelector);if(!a.allowAction(g)){return a.stopEverything(i)}if(f&&a.fire(g,"ajax:aborted:required",[f])){return a.stopEverything(i)}if(h){if(d){return a.fire(g,"ajax:aborted:file",[d])}if(!b.support.submitBubbles&&a.callFormSubmitBindings(g)===false){return a.stopEverything(i)}a.handleRemote(g);return false}else{setTimeout(function(){a.disableFormElements(g)},13)}});b(a.formInputClickSelector).live("click.rails",function(f){var e=b(this);if(!a.allowAction(e)){return a.stopEverything(f)}var d=e.attr("name"),g=d?{name:d,value:e.val()}:null;e.closest("form").data("ujs:submit-button",g)});b(a.formSubmitSelector).live("ajax:beforeSend.rails",function(d){if(this==d.target){a.disableFormElements(b(this))}});b(a.formSubmitSelector).live("ajax:complete.rails",function(d){if(this==d.target){a.enableFormElements(b(this))}})})(jQuery);$.fn.limitMaxlength=function(a){var c=jQuery.extend({attribute:"maxlength",onLimit:function(){},onEdit:function(){}},a);var b=function(){var d=jQuery(this);var e=parseInt(d.attr(c.attribute));if(d.val().length>e){d.val(d.val().substr(0,e));jQuery.proxy(c.onLimit,this)()}jQuery.proxy(c.onEdit,this)(e-d.val().length)};this.each(b);return this.keyup(b).keydown(b).focus(b)};var onEditCallback=function(a){var b=(a==1)?" character left":" characters left";$(this).siblings(".chars-remaining").text(a+b)};
/*!
 * jQuery Smooth Scroll Plugin v1.4.1
 *
 * Date: Tue Nov 15 14:24:14 2011 EST
 * Requires: jQuery v1.3+
 *
 * Copyright 2010, Karl Swedberg
 * Dual licensed under the MIT and GPL licenses (just like jQuery):
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 *
 *
 *
*/
(function(c){function d(b){return b.replace(/^\//,"").replace(/(index|default).[a-zA-Z]{3,4}$/,"").replace(/\/$/,"")}function a(b){return b.replace(/(:|\.)/g,"\\$1")}var f=d(location.pathname),e=function(i){var g=[],b=false,h=i.dir&&i.dir=="left"?"scrollLeft":"scrollTop";this.each(function(){if(!(this==document||this==window)){var j=c(this);if(j[h]()>0){g.push(this)}else{j[h](1);b=j[h]()>0;j[h](0);b&&g.push(this)}}});if(i.el==="first"&&g.length){g=[g.shift()]}return g};c.fn.extend({scrollable:function(b){return this.pushStack(e.call(this,{dir:b}))},firstScrollable:function(b){return this.pushStack(e.call(this,{el:"first",dir:b}))},smoothScroll:function(g){g=g||{};var b=c.extend({},c.fn.smoothScroll.defaults,g);this.die("click.smoothscroll").live("click.smoothscroll",function(l){var s={},q=c(this),p=location.hostname===this.hostname||!this.hostname,r=b.scrollTarget||(d(this.pathname)||f)===f,n=a(this.hash),o=true;if(!b.scrollTarget&&(!p||!r||!n)){o=false}else{p=b.exclude;r=0;for(var m=p.length;o&&r<m;){if(q.is(a(p[r++]))){o=false}}p=b.excludeWithin;r=0;for(m=p.length;o&&r<m;){if(q.closest(p[r++]).length){o=false}}}if(o){l.preventDefault();c.extend(s,b,{scrollTarget:b.scrollTarget||n,link:this});c.smoothScroll(s)}});return this}});c.smoothScroll=function(p,n){var b,o,l,k=0;o="offset";var m="scrollTop",i={};if(typeof p==="number"){b=c.fn.smoothScroll.defaults;l=p}else{b=c.extend({},c.fn.smoothScroll.defaults,p||{});if(b.scrollElement){o="position";b.scrollElement.css("position")=="static"&&b.scrollElement.css("position","relative")}l=n||c(b.scrollTarget)[o]()&&c(b.scrollTarget)[o]()[b.direction]||0}b=c.extend({link:null},b);m=b.direction=="left"?"scrollLeft":m;if(b.scrollElement){o=b.scrollElement;k=o[m]()}else{o=c("html, body").firstScrollable()}i[m]=l+k+b.offset;c.isFunction(b.beforeScroll)&&b.beforeScroll.call(o,b);o.animate(i,{duration:b.speed,easing:b.easing,complete:function(){b.afterScroll&&c.isFunction(b.afterScroll)&&b.afterScroll.call(b.link,b)}})};c.smoothScroll.version="1.4.1";c.fn.smoothScroll.defaults={exclude:[],excludeWithin:[],offset:0,direction:"top",scrollElement:null,scrollTarget:null,beforeScroll:null,afterScroll:null,easing:"swing",speed:400}})(jQuery);
/*!
 * jQuery Expander Plugin v1.3.1
 *
 * Date: Tue Dec 06 00:02:41 2011 EST
 * Requires: jQuery v1.3+
 *
 * Copyright 2011, Karl Swedberg
 * Dual licensed under the MIT and GPL licenses (just like jQuery):
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
*/
(function(a){a.expander={version:"1.3.1",defaults:{slicePoint:100,preserveWords:true,widow:4,expandText:"read more",expandPrefix:"&hellip; ",expandAfterSummary:false,summaryClass:"summary",detailClass:"details",moreClass:"read-more",lessClass:"read-less",collapseTimer:0,expandEffect:"fadeIn",expandSpeed:250,collapseEffect:"fadeOut",collapseSpeed:200,userCollapse:true,userCollapseText:"read less",userCollapsePrefix:" ",onSlice:null,beforeExpand:null,afterExpand:null,onCollapse:null}};a.fn.expander=function(p){function m(q,t){var r="span",s=q.summary;if(t){r="div";if(o.test(s)&&!q.expandAfterSummary){s=s.replace(o,q.moreLabel+"$1")}else{s+=q.moreLabel}s='<div class="'+q.summaryClass+'">'+s+"</div>"}else{s+=q.moreLabel}return[s,"<",r+' class="'+q.detailClass+'"',">",q.details,"</"+r+">"].join("")}function k(q){var r='<span class="'+q.moreClass+'">'+q.expandPrefix;r+='<a href="#">'+q.expandText+"</a></span>";return r}function n(q,r){if(q.lastIndexOf("<")>q.lastIndexOf(">")){q=q.slice(0,q.lastIndexOf("<"))}if(r){q=q.replace(j,"")}return q}function l(q,r){r.stop(true,true)[q.collapseEffect](q.collapseSpeed,function(){r.prev("span."+q.moreClass).show().length||r.parent().children("div."+q.summaryClass).show().find("span."+q.moreClass).show()})}function g(q,s,r){if(q.collapseTimer){i=setTimeout(function(){l(q,s);a.isFunction(q.onCollapse)&&q.onCollapse.call(r,false)},q.collapseTimer)}}var h=a.extend({},a.expander.defaults,p),f=/^<(?:area|br|col|embed|hr|img|input|link|meta|param).*>$/i,j=/(&(?:[^;]+;)?|\w+)$/,d=/<\/?(\w+)[^>]*>/g,e=/<(\w+)[^>]*>/g,c=/<\/(\w+)>/g,o=/(<\/[^>]+>)\s*$/,b=/^<[^>]+>.?/,i;this.each(function(){var S,Q,K,L,J,H,v,D=[],z=[],G={},F=this,M=a(this),y=a([]),R=a.meta?a.extend({},h,M.data()):h,u=!!M.find("."+R.detailClass).length,E=!!M.find("*").filter(function(){return/^block|table|list/.test(a(this).css("display"))}).length,x=(E?"div":"span")+"."+R.detailClass,w="span."+R.moreClass,t=R.expandSpeed||0,I=a.trim(M.html());a.trim(M.text());var P=I.slice(0,R.slicePoint);if(!a.data(this,"expander")){a.data(this,"expander",true);a.each(["onSlice","beforeExpand","afterExpand","onCollapse"],function(r,q){G[q]=a.isFunction(R[q])});P=n(P);for(summTagless=P.replace(d,"").length;summTagless<R.slicePoint;){newChar=I.charAt(P.length);if(newChar=="<"){newChar=I.slice(P.length).match(b)[0]}P+=newChar;summTagless++}P=n(P,R.preserveWords);L=P.match(e)||[];J=P.match(c)||[];K=[];a.each(L,function(r,q){f.test(q)||K.push(q)});L=K;Q=J.length;for(S=0;S<Q;S++){J[S]=J[S].replace(c,"$1")}a.each(L,function(r,q){var A=q.replace(e,"$1"),s=a.inArray(A,J);if(s===-1){D.push(q);z.push("</"+A+">")}else{J.splice(s,1)}});z.reverse();if(u){Q=M.find(x).remove().html();P=M.html();I=P+Q;S=""}else{Q=I.slice(P.length);if(Q===""||Q.split(/\s+/).length<R.widow){return}S=z.pop()||"";P+=z.join("");Q=D.join("")+Q}R.moreLabel=M.find(w).length?"":k(R);if(E){Q=I}P+=S;R.summary=P;R.details=Q;R.lastCloseTag=S;if(G.onSlice){R=(K=R.onSlice.call(F,R))&&K.details?K:R}E=m(R,E);M.html(E);H=M.find(x);v=M.find(w);H.hide();v.find("a").unbind("click.expander").bind("click.expander",function(q){q.preventDefault();v.hide();y.hide();G.beforeExpand&&R.beforeExpand.call(F);H.stop(false,true)[R.expandEffect](t,function(){H.css({zoom:""});G.afterExpand&&R.afterExpand.call(F);g(R,H,F)})});y=M.find("div."+R.summaryClass);R.userCollapse&&!M.find("span."+R.lessClass).length&&M.find(x).append('<span class="'+R.lessClass+'">'+R.userCollapsePrefix+'<a href="#">'+R.userCollapseText+"</a></span>");M.find("span."+R.lessClass+" a").unbind("click.expander").bind("click.expander",function(q){q.preventDefault();clearTimeout(i);q=a(this).closest(x);l(R,q);G.onCollapse&&R.onCollapse.call(F,true)})}});return this};a.fn.expander.defaults=a.expander.defaults})(jQuery);
/*!
--------------------------------
Infinite Scroll
--------------------------------
+ https://github.com/paulirish/infinite-scroll
+ version 2.0b2.111027
+ Copyright 2011 Paul Irish & Luke Shumard
+ Licensed under the MIT license
+ Documentation: http://infinite-scroll.com/
*/
(function(n,i,k){i.infinitescroll=function y(B,D,C){this.element=i(C);this._create(B,D)};i.infinitescroll.defaults={loading:{finished:k,finishedMsg:"",img:"http://www.infinite-scroll.com/loading.gif",msg:null,msgText:"LOADING MORE...",selector:null,speed:"fast",start:k},state:{isDuringAjax:false,isInvalidPage:false,isDestroyed:false,isDone:false,isPaused:false,currPage:1},callback:k,debug:false,behavior:k,binder:i(n),nextSelector:"div.navigation a:first",navSelector:"div.navigation",contentSelector:null,extraScrollPx:150,itemSelector:"div.post",animate:false,pathParse:k,dataType:"html",appendCallback:true,bufferPx:40,errorCallback:function(){},infid:0,pixelsFromNavToBottom:k,path:k,pathOptions:k};i.infinitescroll.prototype={_binding:function g(D){var B=this,C=B.options;C.v="2.0b2.111027";if(!!C.behavior&&this["_binding_"+C.behavior]!==k){this["_binding_"+C.behavior].call(this);return}if(D!=="bind"&&D!=="unbind"){this._debug("Binding value  "+D+" not valid");return false}if(D=="unbind"){(this.options.binder).unbind("smartscroll.infscr."+B.options.infid)}else{(this.options.binder)[D]("smartscroll.infscr."+B.options.infid,function(){B.scroll()})}this._debug("Binding",D)},_create:function s(B,F){if(!this._validate(B)){return false}var C=this.options=i.extend(true,{},i.infinitescroll.defaults,B),E=/(.*?\/\/).*?(\/.*)/,D=i(C.nextSelector).attr("href");C.contentSelector=C.contentSelector||this.element;C.loading.selector=C.loading.selector||C.contentSelector;if(!D){this._debug("Navigation selector not found");return}C.path=this._determinepath(D);C.loading.msg=i('<div id="infscr-loading" class="row"><img alt="Loading..." src="'+C.loading.img+'" /><div class ="loading-text">'+C.loading.msgText+"</div></div>");(new Image()).src=C.loading.img;C.pixelsFromNavToBottom=500;C.loading.start=C.loading.start||function(){i(C.navSelector).hide();C.loading.msg.appendTo(C.loading.selector).fadeIn("fast",function(){beginAjax(C)})};C.loading.finished=C.loading.finished||function(){C.loading.msg.fadeOut("fast")};C.callback=function(G,H){if(!!C.behavior&&G["_callback_"+C.behavior]!==k){G["_callback_"+C.behavior].call(i(C.contentSelector)[0],H)}if(F){F.call(i(C.contentSelector)[0],H,C)}};this._setup()},_debug:function p(){if(this.options&&this.options.debug){return n.console&&console.log.call(console,arguments)}},_determinepath:function z(E){var D=this.options;if(!!D.behavior&&this["_determinepath_"+D.behavior]!==k){this["_determinepath_"+D.behavior].call(this,E);return}if(!!D.pathParse){this._debug("pathParse manual");return D.pathParse()}else{var B=i(D.nextSelector).attr("href");var C=new Array();if(typeof B!="undefined"){var E=B.split("?page=")[0]+"?page=";C=B.split("&");D.pathOptions=C;remove_first_element=C.shift()}}this._debug("determinePath",E);return E},_error:function u(C){var B=this.options;if(!!B.behavior&&this["_error_"+B.behavior]!==k){this["_error_"+B.behavior].call(this,C);return}if(C!=="destroy"&&C!=="end"){C="unknown"}this._debug("Error",C);if(C=="end"){this._showdonemsg()}B.state.isDone=true;B.state.currPage=1;B.state.isPaused=false;this._binding("unbind")},_loadcallback:function c(F,G){var E=this.options,I=this.options.callback,B=(E.state.isDone)?"done":(!E.appendCallback)?"no-append":"append",H;if(!!E.behavior&&this["_loadcallback_"+E.behavior]!==k){this["_loadcallback_"+E.behavior].call(this,F,G);return}switch(B){case"done":this._showdonemsg();return false;break;case"no-append":i(E.itemSelector).filter(":last").after(G);break;case"append":var D=F.children();if(D.length==0){return this._error("end")}H=document.createDocumentFragment();while(F[0].firstChild){H.appendChild(F[0].firstChild)}this._debug("contentSelector",i(E.contentSelector)[0]);i(E.contentSelector)[0].appendChild(H);G=D.get();break}E.loading.finished.call(i(E.contentSelector)[0],E);if(E.animate){var C=i(n).scrollTop()+i("#infscr-loading").height()+E.extraScrollPx+"px";i("html,body").animate({scrollTop:C},800,function(){E.state.isDuringAjax=false})}if(!E.animate){E.state.isDuringAjax=false}I(this,G);addthis.toolbox(".addthis_toolbox")},_nearbottom:function t(){var C=this.options,B=0+i(document).height()-(C.binder.scrollTop())-i(n).height();if(!!C.behavior&&this["_nearbottom_"+C.behavior]!==k){this["_nearbottom_"+C.behavior].call(this);return}this._debug("math:","pixels from window bottom to bottom = "+B,"pixels from nav to bottom = "+C.pixelsFromNavToBottom);return(B-C.bufferPx<C.pixelsFromNavToBottom)},_pausing:function l(C){var B=this.options;if(!!B.behavior&&this["_pausing_"+B.behavior]!==k){this["_pausing_"+B.behavior].call(this,C);return}if(C!=="pause"&&C!=="resume"&&C!==null){this._debug("Invalid argument. Toggling pause value instead")}C=(C&&(C=="pause"||C=="resume"))?C:"toggle";switch(C){case"pause":B.state.isPaused=true;break;case"resume":B.state.isPaused=false;break;case"toggle":B.state.isPaused=!B.state.isPaused;break}this._debug("Paused",B.state.isPaused);return false},_setup:function q(){var B=this.options;if(!!B.behavior&&this["_setup_"+B.behavior]!==k){this["_setup_"+B.behavior].call(this);return}this._binding("bind");return false},_showdonemsg:function a(){var B=this.options;if(!!B.behavior&&this["_showdonemsg_"+B.behavior]!==k){this["_showdonemsg_"+B.behavior].call(this);return}B.loading.msg.find("img").hide().parent().find("div").html(B.loading.finishedMsg).animate({opacity:1},50,function(){i(this).parent().fadeOut("normal")});B.errorCallback.call(i(B.contentSelector)[0],"done")},_validate:function v(C){for(var B in C){if(B.indexOf&&B.indexOf("Selector")>-1&&i(C[B]).length===0){this._debug("Your "+B+" found no elements.");return false}return true}},bind:function o(){this._binding("bind")},destroy:function A(){this.options.state.isDestroyed=true;return this._error("destroy")},pause:function e(){this._pausing("pause")},resume:function h(){this._pausing("resume")},retrieve:function b(I){var J=this,C=J.options,L=C.path,D=C.path_options,F,K,M,B,E,I=I||null,H=(!!I)?I:C.state.currPage;beginAjax=function G(N){N.state.currPage++;J._debug("heading into ajax",L);F=i(N.contentSelector).is("table")?i("<tbody/>"):i("<div/>");M=L+N.state.currPage+"&"+N.pathOptions.join("&");B=(N.dataType=="html"||N.dataType=="json")?N.dataType:"html+callback";if(N.appendCallback&&N.dataType=="html"){B+="+callback"}switch(B){case"html+callback":J._debug("Using HTML via .load() method");F.load(M+" "+N.itemSelector,null,function O(P){J._loadcallback(F,P)});break;case"html":case"json":J._debug("Using "+(B.toUpperCase())+" via $.ajax() method");i.ajax({url:M,dataType:N.dataType,complete:function O(P,Q){E=(typeof(P.isResolved)!=="undefined")?(P.isResolved()):(Q==="success"||Q==="notmodified");if(E){if(P.responseText.trim().length==0){J._error("end")}else{J._loadcallback(F,P.responseText)}}else{J._error("end")}}});break}};if(!!C.behavior&&this["retrieve_"+C.behavior]!==k){this["retrieve_"+C.behavior].call(this,I);return}if(C.state.isDestroyed){this._debug("Instance is destroyed");return false}C.state.isDuringAjax=true;C.loading.start.call(i(C.contentSelector)[0],C)},scroll:function f(){var B=this.options,C=B.state;if(!!B.behavior&&this["scroll_"+B.behavior]!==k){this["scroll_"+B.behavior].call(this);return}if(C.isDuringAjax||C.isInvalidPage||C.isDone||C.isDestroyed||C.isPaused){return}if(!this._nearbottom()){return}this.retrieve()},toggle:function x(){this._pausing()},unbind:function m(){this._binding("unbind")},update:function j(B){if(i.isPlainObject(B)){this.options=i.extend(true,this.options,B)}}};i.fn.infinitescroll=function d(D,E){var C=typeof D;switch(C){case"string":var B=Array.prototype.slice.call(arguments,1);this.each(function(){var F=i.data(this,"infinitescroll");if(!F){return false}if(!i.isFunction(F[D])||D.charAt(0)==="_"){return false}F[D].apply(F,B)});break;case"object":this.each(function(){var F=i.data(this,"infinitescroll");if(F){F.update(D)}else{i.data(this,"infinitescroll",new i.infinitescroll(D,E,this))}});break}return this};var w=i.event,r;w.special.smartscroll={setup:function(){i(this).bind("scroll",w.special.smartscroll.handler)},teardown:function(){i(this).unbind("scroll",w.special.smartscroll.handler)},handler:function(E,B){var D=this,C=arguments;E.type="smartscroll";if(r){clearTimeout(r)}r=setTimeout(function(){i.event.handle.apply(D,C)},B==="execAsap"?0:100)}};i.fn.smartscroll=function(B){return B?this.bind("smartscroll",B):this.trigger("smartscroll",["execAsap"])}})(window,jQuery);brevidy.convertToDateArray=function(g,b,f){var h=new Date(g+b+","+f);var c=h.getMonth()+1;var a=h.getDate();var e=h.getFullYear();return{month:c,day:a,year:e}};brevidy.ISODateString=function(b){function a(c){return c<10?"0"+c:c}return b.getUTCFullYear()+"-"+a(b.getUTCMonth()+1)+"-"+a(b.getUTCDate())+"T"+a(b.getUTCHours())+":"+a(b.getUTCMinutes())+":"+a(b.getUTCSeconds())+"Z"};