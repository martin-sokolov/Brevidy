/*!
*
* Brevidy jQuery effects, validations, and other stuff
*
* Think you can improve this code?  E-mail us at:  jobs@brevidy.com
*
*/
$(document).ready(function(){brevidy.setup_ajax_data=function(){var e=$('input[name="channel_token"]');if(e){$.ajaxSetup({data:{channel_token:e.val()}})}};brevidy.setup_ajax_data();$(".prevent-jump").live("click",function(f){f.preventDefault()});$(".dropdown").live("mouseenter mouseleave",function(e){if(e.type=="mouseenter"){$(this).addClass("open").children(".dropdown-menu").show()}else{$(this).removeClass("open").children(".dropdown-menu").fadeOut("fast")}});$("html").click(function(){$(".dropdown").removeClass("open").children(".dropdown-menu").fadeOut("fast")});brevidy.setup_video_ajax_spinner=function(f){var e="data-video-id";var g=f.attr(e);brevidy.show_video_ajax_spinner(g);f.bind("ajaxStop",function(){brevidy.hide_video_ajax_spinner(g)})};brevidy.show_video_ajax_spinner=function(e){var f="data-video-id";$("li.ajax-animation["+f+"="+e+"]").css("display","inline")};brevidy.hide_video_ajax_spinner=function(e){var f="data-video-id";$("li.ajax-animation["+f+"="+e+"]").css("display","none")};$(".add-to-channel-link, .remove-tag, .view-all-badges, .thumbnail-and-badges .thumbnail, p.view-all-badges a").live("click",function(){brevidy.setup_video_ajax_spinner($(this))});$(".expandable").expander({slicePoint:300,expandPrefix:"... ",expandText:"Read more",preserveWords:false,userCollapse:false,widow:0});$("input[maxlength], textarea[maxlength]").limitMaxlength({onEdit:onEditCallback});$("[rel=twipsy], .tooltip").twipsy();brevidy.get_badge_icon_class_name=function(f){var e=false;$.each(f,function(g,h){if(h.match(/^badge[A-Za-z]+$/)){e=h}else{if(h.match(/^badge[A-Za-z]+_Large$/)){h=h.replace("_Large","");e=h}}});return e};brevidy.custom_badge_title=function(f,e){f='<div class="title"><i class="'+e+'_Preview"></i><p>'+f+"</p></div>";return f};$(".tooltip-with-icon").twipsy({html:true,title:function(){var f=$(this).attr("class").split(/\s+/);var e=brevidy.get_badge_icon_class_name(f);return brevidy.custom_badge_title(this.getAttribute("data-original-title"),e)}});$(".tabs").tabs();brevidy.custom_dialog=function(e){if($("#brevidy-modal").length!=0){}else{$("body").append(e);$("#brevidy-modal").modal({show:true,backdrop:"static",keyboard:true})}};brevidy.dialog=function(i,g,e){if($("#brevidy-modal").length!=0){}else{if(e=="error"){var f="error"}var h='<div id="brevidy-modal" class="modal hide">                                <div class="modal-header '+f+'">                                  <h3>'+i+'</h3>                                </div>                                <div class="modal-body">                                  <p>'+g+'</p>                                </div>                                <div class="modal-footer">                                  <a href="#" class="modal-okay-btn btn">Okay</a>                                </div>                              </div>';$("body").append(h);$("#brevidy-modal").modal({show:true,backdrop:"static",keyboard:true})}};brevidy.confirmation_dialog=function(h,j,g){if($("#brevidy-modal").length!=0){}else{var e=(j=="Delete"||j=="Remove"||j=="Block")?"danger":"primary";var f='<a href="#" class="modal-confirm-btn btn '+e+'" >'+j+'</a>                        <a href="#" class="modal-cancel-btn btn secondary">Cancel</a>';var i='<div id="brevidy-modal" class="modal hide">                                <div class="modal-header">                                  <h3>Are you sure?</h3>                                </div>                                <div class="modal-body">                                  <p>'+h+'</p>                                </div>                                <div class="modal-footer">'+f+"</div>                              </div>";$("body").append(i);$("#brevidy-modal").modal({show:true,backdrop:"static",keyboard:true});if(g){$(".modal-confirm-btn").click(g)}}};$("a.show-msg-modal").live("click",function(){var f=$(this).attr("data-modal-title"),e=$(this).attr("data-modal-message");brevidy.dialog(f,e,"message");return false});$("a.modal-cancel-btn, a.modal-okay-btn").live("click",function(){$("#brevidy-modal").modal("hide").remove();return false});$("a.modal-confirm-btn").live("click",function(){$("#brevidy-modal").modal("hide").remove();return false});brevidy.handle_ajax_error=function(f,j){if(typeof f=="undefined"){f="item"}try{var h=jQuery.parseJSON(j.responseText)}catch(i){var h=null}if(j.status==404){if(h!==null){var g=h.error}else{var g="That "+f+" could not be found or you do not have the proper access for it"}}else{if(j.status==422||401){if(h!==null){var g=h.error}}}if(typeof g=="undefined"){g="There was an unknown error or the request timed out.  Please try again later"}brevidy.dialog("Error",g,"error")};$(".featured-popover").popover({placement:"below"});$("#back-to-top").hide();var d=false;$(window).scroll(function(){d=true});setInterval(function(){if(d){d=false;if($(window).scrollTop()>100){$("#back-to-top").fadeIn()}else{$("#back-to-top").fadeOut()}}},250);$("#back-to-top a").click(function(){$.smoothScroll({scrollTarget:"#top",speed:1000});return false});$(':submit[name="signup"]').click(function(){var h=$(':text[id="signupUsername"]');var o=h.val().trim().length;var e=$(':text[id="signupName"]');var n=e.val().trim().length;var k=$(':text[id="signupEmail"]');var m=k.val().trim().length;var q=$(':password[id="signupPassword"]');var l=q.val().trim().length;var j=$('select[id="signupBirthdayMonth"]');var p=$("option#signupChooseMonth:selected").length;var f=$('select[id="signupBirthdayDay"]');var i=$("option#signupChooseDay:selected").length;var g=$('select[id="signupBirthdayYear"]');var s=$("option#signupChooseYear:selected").length;var r;if(!o||!n||!m||!l||p||i||s){$(".formErrorField.js-validate").slideUp("fast",function(){$(this).html("Please fill out the entire form.").slideDown("fast")})}else{if(q.val().trim().length<6){$(".formErrorField.js-validate").slideUp("fast",function(){$(this).html("Password must be longer than 6 characters.").slideDown("fast")})}else{$(".formErrorField.js-validate").slideUp("fast");r=1}}if(!r){return false}});$(".top-banner").mouseenter(function(){$(this).children("a").css("display","block")}).mouseleave(function(){$(this).children("a").css("display","none")});$(".video-post").live("mouseenter mouseleave",function(e){if(e.type=="mouseenter"){$(this).children(".row.heading").children("ul.settings-menu").show()}else{$(this).children(".row.heading").children("ul.settings-menu").fadeOut("fast")}});$(".add-to-channel-link, .badge-link, .comment-link, .share-link, .tag-link").live("mouseenter mouseleave",function(e){if(e.type=="mouseenter"){$(this).children("img").css("opacity","1.0")}else{$(this).children("img").css("opacity",".75")}});$(".give-first-badge").live("click",function(){var f="data-video-id";var h=$(this).attr(f);var e=$(".badges-area["+f+"="+h+"]");var g=$(".badge-arrow["+f+"="+h+"]");if(e.is(":visible")){g.fadeOut("fast",function(){$(this).fadeIn("fast")});e.fadeOut("fast",function(){$(this).fadeIn("fast")})}else{e.show();g.show();$(".comments-area["+f+"="+h+"]").hide();$(".comment-arrow["+f+"="+h+"]").hide();$(".share-area["+f+"="+h+"]").hide();$(".share-arrow["+f+"="+h+"]").hide();$(".tags-area["+f+"="+h+"]").hide();$(".tag-arrow["+f+"="+h+"]").hide()}return false});$(".badge-link").live("click",function(){var e="data-video-id";var f=$(this).attr(e);$(".badges-area["+e+"="+f+"]").fadeToggle(100);$(".badge-arrow["+e+"="+f+"]").fadeToggle(100);$(".comments-area["+e+"="+f+"]").hide();$(".comment-arrow["+e+"="+f+"]").hide();$(".share-area["+e+"="+f+"]").hide();$(".share-arrow["+e+"="+f+"]").hide();$(".tags-area["+e+"="+f+"]").hide();$(".tag-arrow["+e+"="+f+"]").hide();return false});$(".comment-link").live("click",function(){var e="data-video-id";var f=$(this).attr(e);$(".badges-area["+e+"="+f+"]").hide();$(".badge-arrow["+e+"="+f+"]").hide();$(".comments-area["+e+"="+f+"]").fadeToggle(100);$(".comment-arrow["+e+"="+f+"]").fadeToggle(100);$(".share-area["+e+"="+f+"]").hide();$(".share-arrow["+e+"="+f+"]").hide();$(".tags-area["+e+"="+f+"]").hide();$(".tag-arrow["+e+"="+f+"]").hide();$(".comments-area["+e+"="+f+"] textarea").select();return false});$(".share-link").live("click",function(){var e="data-video-id";var f=$(this).attr(e);$(".badges-area["+e+"="+f+"]").hide();$(".badge-arrow["+e+"="+f+"]").hide();$(".comments-area["+e+"="+f+"]").hide();$(".comment-arrow["+e+"="+f+"]").hide();$(".share-area["+e+"="+f+"]").fadeToggle(100);$(".share-arrow["+e+"="+f+"]").fadeToggle(100);$(".tags-area["+e+"="+f+"]").hide();$(".tag-arrow["+e+"="+f+"]").hide();$(".share-area["+e+"="+f+"] .share-content .public-link").children("input[type=text]").select();return false});$(".tag-link").live("click",function(){var e="data-video-id";var f=$(this).attr(e);$(".badges-area["+e+"="+f+"]").hide();$(".badge-arrow["+e+"="+f+"]").hide();$(".comments-area["+e+"="+f+"]").hide();$(".comment-arrow["+e+"="+f+"]").hide();$(".share-area["+e+"="+f+"]").hide();$(".share-arrow["+e+"="+f+"]").hide();$(".tags-area["+e+"="+f+"]").fadeToggle(100);$(".tag-arrow["+e+"="+f+"]").fadeToggle(100);return false});$(".delete-video").live("click",function(){var e="data-video-id";var g=$(this).attr(e);var f=$(this).attr("href");brevidy.confirmation_dialog("You are about to delete this video which will also delete all comments and badges associated with the video.  This cannot be undone.","Delete",function(){brevidy.show_video_ajax_spinner(g);$.ajax({data:{_method:"DELETE"},type:"POST",url:f,success:function(h){$(".video-post["+e+"="+g+"]").fadeOut("fast",function(){$(this).remove()})},error:function(h){brevidy.hide_video_ajax_spinner(g);brevidy.handle_ajax_error("video",h)}})});return false});$(".give-a-badge").live("click",function(){var f=$(this);var h="data-badge-type";var i=f.attr(h);var g=f.attr("href");var e=$(this).attr("data-video-id");brevidy.show_video_ajax_spinner(e);$.ajax({data:{badge_type:i},type:"POST",url:g,success:function(l){var p=false;var o="data-user-id";var n="data-video-id";var j=l.video_id;var k=$(".show-badges["+n+"="+j+"] .badges li");var m=k.size();f.fadeOut(1,function(){$(this).after(l.unbadge);$(this).remove()});$(".twipsy").remove();if(l.total_video_badges==1){$(".show-badges["+n+"="+j+"]").html('<div class="badges" data-video-id="'+j+'"><ul>'+l.html+"</ul></div>");$(".show-badges["+n+"="+j+"] ul li:first").css({opacity:"0.0"}).animate({opacity:"1.0"},500)}else{$(".show-badges["+n+"="+j+"] li").each(function(r,s){var q=$(this);var t=q.attr(h);if(i==t){p=q}});if(p){p.fadeOut("fast",function(){$(this).remove();$(".show-badges["+n+"="+j+"] ul").prepend(l.html);$(".show-badges["+n+"="+j+"] ul li:first").css({opacity:"0.0"}).animate({opacity:"1.0"},500)})}else{if(m>=5){$(".show-badges["+n+"="+j+"] ul li").eq(4).fadeOut("fast",function(){$(this).remove();$(".show-badges["+n+"="+j+"] ul").prepend(l.html);$(".show-badges["+n+"="+j+"] ul li:first").css({opacity:"0.0"}).animate({opacity:"1.0"},500)})}else{$(".show-badges["+n+"="+j+"] ul").prepend(l.html);$(".show-badges["+n+"="+j+"] ul li:first").css({opacity:"0.0"}).animate({opacity:"1.0"},500)}}}$("p.no-badges-given-yet["+n+"="+j+"]").remove();$("p.view-all-badges["+n+"="+j+"]").remove();$(".show-badges["+n+"="+j+"] .badges").after('<p class="view-all-badges"  data-video-id="'+j+'">'+l.view_all_badges_link+"</p>");brevidy.hide_video_ajax_spinner(e)},error:function(j){brevidy.hide_video_ajax_spinner(e);brevidy.handle_ajax_error("badge",j)}});return false});$(".unbadge").live("click",function(){var f=$(this);var i=f.attr("href");var g="data-badge-id";var h=f.attr(g);var e=$(this).attr("data-video-id");brevidy.show_video_ajax_spinner(e);$.ajax({data:{_method:"DELETE",},dataType:"json",type:"POST",url:i+"/"+h,success:function(l){var n="data-user-id";var m="data-video-id";var j=l.video_id;var k="data-badge-type";var o=f.attr(k);$(".twipsy").remove();f.fadeOut(1,function(){$(this).after(l.give_a_badge);$(this).remove()});$(".show-badges["+m+"="+j+"] li["+k+"="+o+"] span").text(l.this_badge_count);if(l.this_badge_count==0){$(".show-badges["+m+"="+j+"] li["+k+"="+o+"]").fadeOut("fast",function(){$(this).remove()})}if(l.total_video_badges==0){$(".show-badges["+m+"="+j+"] .badges, p.view-all-badges["+m+"="+j+"]").fadeOut("fast",function(){$(this).remove();$(".show-badges["+m+"="+j+"]").html('<p class="no-badges-given-yet">No badges given yet.  <a class="give-first-badge" data-video-id="'+j+'" href="#">Give one!</a></p>')})}else{$("p.view-all-badges["+m+"="+j+"]").remove();$(".show-badges["+m+"="+j+"] .badges").after('<p class="view-all-badges"  data-video-id="'+j+'">'+l.view_all_badges_link+"</p>")}brevidy.hide_video_ajax_spinner(e)},error:function(j){brevidy.hide_video_ajax_spinner(e);brevidy.handle_ajax_error("badge",j)}});return false});$("#update-channel-name input[type=submit]").live("click",function(){$(this).parent().siblings(".ajax-animation").fadeIn("fast")});$("#update-channel-name").live("ajax:success",function(g,f,e){$(this).siblings(".ajax-animation").hide();$(this).siblings(".green-checkmark").fadeIn("slow").fadeOut("1000")});$("#update-channel-name").live("ajax:error",function(f,g,e){$(this).siblings(".ajax-animation").hide();brevidy.handle_ajax_error("channel",g)});$("#toggle-channel-privacy").live("ajax:success",function(h,g,f){console.log($(this).attr("href"));var e=$(this);if(e.hasClass("success")){console.log("turning off privacy");e.attr("href",g.new_link).removeClass("success").text("No");$(".private-channel-link").fadeOut("fast")}else{console.log("turning on privacy");e.attr("href",g.new_link).addClass("success").text("Yes");$(".private-channel-link").fadeIn("fast")}});$("#toggle-channel-privacy").live("ajax:error",function(f,g,e){brevidy.handle_ajax_error("channel",g)});$(".subscribe").live("ajax:success",function(g,f,e){if(f.requesting_permission){brevidy.dialog("Requesting Access","We have sent an email on your behalf requesting access to this channel.  Please be patient while they respond to this request.","message")}else{if($(this).hasClass("small")){$(this).closest(".pull-right").html(f.button)}else{$(this).closest(".button-area").html(f.button)}}});$(".unsubscribe").live("ajax:success",function(h,g,e){if($(this).hasClass("small")){$(this).closest(".pull-right").html(g.button)}else{var f=$(this).closest(".button-area");f.html(g.button);if(g.is_private){f.siblings(".channel-thumbnail-area").fadeOut("fast",function(){$(this).before(g.private_area_message);$(this).remove()})}}});$(".subscribe, .unsubscribe").live("ajax:error",function(f,g,e){brevidy.handle_ajax_error("channel",g)});$(".delete-channel-area .show-delete-area").click(function(){$(this).remove();$(".alert-message").slideDown("fast");return false});$(".delete-channel").live("click",function(){var e=$(this).attr("href");brevidy.confirmation_dialog("You are about to delete this channel which will also delete all videos, comments, badges, and subscribers associated with this channel.  This cannot be undone.","Delete",function(){$.ajax({data:{_method:"DELETE"},type:"POST",url:e,error:function(f){brevidy.handle_ajax_error("channel",f)}})});return false});$(".remove-subscriber").live("click",function(){var e=$(this);var f=e.attr("href");brevidy.confirmation_dialog("You are about to remove this person from your subscribers.","Remove",function(){$.ajax({data:{_method:"DELETE"},type:"POST",url:f,success:function(g){e.closest("li.zebra-striped").fadeOut("fast",function(){$(this).remove()})},error:function(g){brevidy.handle_ajax_error("subscriber",xhr)}})});return false});$(".block-user").live("click",function(){var f=$(this);var e=f.attr("href");brevidy.confirmation_dialog("You are about to block this user which will unsubscribe them from all of your channels and prevent them from viewing your content in the future.","Block",function(){$.ajax({data:{_method:"DELETE"},type:"POST",url:e,success:function(g){f.closest("li.zebra-striped").fadeOut("fast",function(){$(this).remove()})},error:function(g){brevidy.handle_ajax_error("user",xhr)}})});return false});$(".comment-box textarea").live("focus",function(){var e="data-video-id";var f=$(this).attr(e);$(this).animate({height:"35px",},"fast");$(".comment-box .button-wrapper["+e+"="+f+"]").slideDown("fast")});$(".comment-box textarea").live("keydown",function(e){if(e.keyCode=="13"){comment_button=$(this).siblings(".button-wrapper").children(".btn");comment_button.submit();brevidy.setup_video_ajax_spinner($(this));return false}});$(".comment-box input.btn").live("click",function(){brevidy.setup_video_ajax_spinner($(this))});$("a.show-all-comments").live("click",function(){var e=$(this);var f="data-video-id";var g=e.attr(f);e.parent().fadeOut("fast",function(){$("li.hidden-comment["+f+"="+g+"]").fadeIn("fast");e.remove()});return false});$(".post-new-comment").live("ajax:success",function(j,i,g){var h="data-video-id";var k=i.video_id;var f=$(this);var e=$(".comments-area["+h+"="+k+"] ul.comments-list");e.append(i.html);e.children("li:last").hide().fadeIn(250);$("li.show-all-comments a["+h+"="+k+"]").text("Show all "+i.comments_count+" comments");$(".comment-box textarea["+h+"="+k+"]").val("").blur()});$(".comments-list li").live("mouseenter mouseleave",function(e){if(e.type=="mouseenter"){$(this).children(".delete-comment").show()}else{$(this).children(".delete-comment").hide()}});$(".delete-comment").live("mouseenter mouseleave",function(e){if(e.type=="mouseenter"){$(this).css("opacity","1.0")}else{$(this).css("opacity","0.5")}});$(".delete-comment").live("ajax:success",function(g,f,e){$(".twipsy").remove();$(this).closest("li").fadeOut("fast",function(){$(this).remove()})});$(".post-new-comment, .delete-comment").live("ajax:error",function(f,g,e){brevidy.handle_ajax_error("comment",g)});$("a.share-socially").live("click",function(){$(this).addClass("lighten-to-blue").siblings().filter(".lighten-to-blue").removeClass("lighten-to-blue");$(this).siblings(".public-link, .embed-code, .email-form").filter(":visible").fadeOut("fast",function(){$(this).siblings(".social-sharing").fadeIn("fast")});return false});$("a.link-to-video").live("click",function(){$(this).addClass("lighten-to-blue").siblings().filter(".lighten-to-blue").removeClass("lighten-to-blue");$(this).siblings(".social-sharing, .embed-code, .email-form").filter(":visible").fadeOut("fast",function(){$(this).siblings(".public-link").fadeIn("fast").children("input[type=text]").select()});return false});$("a.embed-video").live("click",function(){$(this).addClass("lighten-to-blue").siblings().filter(".lighten-to-blue").removeClass("lighten-to-blue");$(this).siblings(".social-sharing, .public-link, .email-form").filter(":visible").fadeOut("fast",function(){$(this).siblings(".embed-code").fadeIn("fast").children("textarea").select()});return false});$("a.email-video").live("click",function(){$(this).addClass("lighten-to-blue").siblings().filter(".lighten-to-blue").removeClass("lighten-to-blue");$(this).siblings(".social-sharing, .public-link, .embed-code").filter(":visible").fadeOut("fast",function(){$(this).siblings(".email-form").fadeIn("fast").children("input[type=text]").select()});return false});$(".share-via-email").live("ajax:success",function(g,f,e){brevidy.dialog("Yay!!!",f.message,"message");$(this).children('input[name="recipient_email"], textarea[name="personal_message"]').val("")});$(".share-via-email").live("ajax:error",function(f,g,e){brevidy.handle_ajax_error("invitation",g)});$("a.remove-tag").live("ajax:success",function(h,g,e){$that=$(this);var f="data-video-id";var i=g.video_id;$(".twipsy").remove();$that.parent().fadeOut("fast",function(){$that.parent().remove();if(g.tags_count==0){$(".tags-area["+f+"="+i+"]").html('<p class="no-content-msg"><i>There are currently no tags organizing this video.</i></p>')}})});$("a.remove-tag").live("ajax:error",function(f,g,e){brevidy.handle_ajax_error("tag",g)});$(".thumbnail-and-badges .thumbnail").live("click",function(){var e="data-video-id";var g=$(this).attr(e);var f=$(this).attr("data-video-path");if(f.length!=0){$.ajax({dataType:"json",type:"GET",url:f,success:function(i){$("#brevidy-player-"+g).html(i.html);$(".thumbnail["+e+"="+g+"]").fadeOut(150,function(){$(".player-area["+e+"="+g+"]").fadeIn(100,function(){$.smoothScroll({offset:-50,scrollTarget:".video-post["+e+"="+g+"]",speed:500})})});var h=$(".player-area").filter(":visible").not(".player-area["+e+"="+g+"]");$.each(h,function(j,k){brevidy.collapse_player($(this).attr("data-video-id"))})},error:function(h){brevidy.handle_ajax_error("video",h)}})}else{brevidy.hide_video_ajax_spinner(g)}return false});$(".collapse-player-controls a").live("click",function(){brevidy.collapse_player($(this).attr("data-video-id"));return false});brevidy.collapse_player=function(e){var f="data-video-id";$(".player-area["+f+"="+e+"]").fadeOut(5,function(){if(jwplayer("brevidy-player-"+e)){jwplayer("brevidy-player-"+e).remove()}$("#brevidy-player-"+e).html("");$(".thumbnail["+f+"="+e+"]").fadeIn(5)})};brevidy.profileCategories=["website","bio","interests","favorite_music","favorite_movies","favorite_books","favorite_foods","favorite_people","things_i_could_live_without","one_thing_i_would_change_in_the_world","quotes_to_live_by"];$("#edit-profile").click(function(){$(this).hide();$("#save-profile").show();$("#cancel-profile").show();$.each(brevidy.profileCategories,function(e,f){if($(".profile-content div."+f).text().trim().toLowerCase()=="none"){$(".profile-content textarea."+f).val("")}$(".profile-content div."+f).hide();$(".profile-content textarea."+f).show()});return false});$("#save-profile").ajaxStart(function(){$(".profile-buttons .ajax-animation").show()}).ajaxStop(function(){$(".profile-buttons .ajax-animation").hide()});$("#save-profile").click(function(){var f=$(this);var g={};var e=f.attr("href");$.each(brevidy.profileCategories,function(h,i){g[i]=$(".profile-content textarea."+i).val().trim()});$.ajax({data:{profile:g},type:"PUT",url:e,success:function(h){f.hide();$("#cancel-profile").hide();$("#edit-profile").show();$.each(brevidy.profileCategories,function(i,j){if(!h.text[j]){if(j=="website"){$(".user-info-section p.website").html("")}$("div."+j).html("<p>None</p>");$(".profile-content textarea."+j).val("None")}else{if(j=="website"){$(".user-info-section p.website").html(h.html[j]);$(".user-info-section p.website p").replaceWith(function(){return $(this).contents()})}$("div."+j).html(h.html[j]);$(".profile-content textarea."+j).val(h.text[j])}$(".profile-content textarea."+j).hide();$(".profile-content div."+j).show()})},error:function(h){brevidy.handle_ajax_error("profile",h)}});return false});$("#cancel-profile").click(function(){$.each(brevidy.profileCategories,function(e,f){$(".profile-content textarea."+f).hide();$(".profile-content div."+f).show()});$(this).hide();$("#save-profile").hide();$("#edit-profile").show();return false});$(".choose-a-thumbnail li").click(function(){var e=$(this).attr("data-thumb-number");$("li.selected-thumbnail").removeClass("selected-thumbnail");$(this).addClass("selected-thumbnail");$("input.selected-thumbnail").val(e)});$(".show-add-video-meta-area").live("click",function(f){f.preventDefault();$(".add-to-channel-warning").remove();$("#add-to-channel, .add-video-meta-area").fadeIn("fast")});$(".add-to-channel-link").live("ajax:error",function(f,g,e){brevidy.handle_ajax_error("channel",g)});brevidy.update_featured_videos=function(){$(".featured-video-post").css("background-color","#ededed").children(".featured-video-meta-area").children("span.label.important").hide();$.each($(".featured-video-post").slice(0,4),function(e,f){$(this).css("background-color","#dcf5dc");$(this).children(".featured-video-meta-area").children("span.label.important").show()});$(".featured-video-post").children(".update-position-area").children(".move-to-top").show();$(".featured-video-post").eq(0).children(".update-position-area").children(".move-to-top").hide()};brevidy.update_featured_videos();$("a.move-video-to-top").live("ajax:success",function(i,m,h){var l="data-video-id";var f=$(this).attr(l);var j=$(this).closest(".featured-video-post");var e=j.clone();var k=$(".featured-video-post").eq(0);j.fadeOut("fast",function(){$(this).remove();k.before(e).hide().fadeIn("fast");brevidy.update_featured_videos()});var g=$(".featured-video-object["+l+"="+f+"]");if(g.length){g.fadeOut("fast",function(){$(this).remove();$("#featured-videos .featured-video-object").eq(0).before(m.featured_video).hide().fadeIn("fast")})}else{$("#featured-videos .featured-video-object").eq(3).fadeOut("fast",function(){$(this).remove();$("#featured-videos .featured-video-object").eq(0).before(m.featured_video).hide().fadeIn("fast")})}});$("a.move-video-to-top").live("ajax:error",function(f,g,e){brevidy.handle_ajax_error("featured video",g)});$(".send-invites").live("ajax:success",function(g,f,e){brevidy.dialog("Yay!!!",f.message,"message");$("textarea#recipient_email, textarea#personal_message").val("")});$(".send-invites").live("ajax:error",function(f,g,e){brevidy.handle_ajax_error("invitation",g)});var b=false;var c=$("#user_username, #signupUsername");$("#user_username, #signupUsername").keyup(function(){$(this).siblings("span").text("http://brevidy.com/"+$(this).val().trim());b=true});var a=setInterval(function(){if(b&&c.val().trim().length!=0){b=false;username=c.val().trim();availability_path=c.attr("data-path");$.ajax({data:{username:username},type:"GET",url:availability_path,success:function(e){span_sib=c.siblings("span");span_sib.text("http://brevidy.com/"+username+" is "+e.availability_text);(e.availability_text=="available")?span_sib.removeClass("red").addClass("green"):span_sib.removeClass("green").addClass("red")},error:function(e){brevidy.dialog("Error","There was an error checking the availability of that username.  Please try again later.","error")}})}else{if(c.val().trim().length==0){c.siblings("span").removeClass("red green")}}},1000);if(!c.length){clearInterval(a)}$("#update-user-info input[type=submit], #update-notifications input[type=submit], #update-password input[type=submit]").live("click",function(){$(this).siblings(".ajax-animation").fadeIn("fast")});$("#update-user-info, #update-notifications, #update-password").live("ajax:success",function(g,f,e){$(this).children(".button-area").children(".ajax-animation").hide();$(this).children(".button-area").children(".green-checkmark").fadeIn("slow").fadeOut("1000");$("#old_password, #new_password, #confirm_new_password").val("")});$("#update-user-info, #update-notifications, #update-password, .unblock-user").live("ajax:error",function(f,g,e){$(this).children(".button-area").children(".ajax-animation").hide();brevidy.handle_ajax_error("user",g)});$(".unblock-user").live("ajax:success",function(g,f,e){$(this).parent().slideUp("fast",function(){$(this).remove()})});$(".set-new-background-image").live("ajax:success",function(g,f,e){if(f.background_image_id==0){$("body").removeClass("dark").addClass("light")}else{if(f.background_image_id==1){$("body").removeClass("light").addClass("dark")}}});$(".set-new-background-image").live("ajax:error",function(f,g,e){brevidy.handle_ajax_error("background image",g)});$(".set-new-banner-image").live("ajax:success",function(g,f,e){$(".top-banner img").attr("src",f.image_path);$.smoothScroll({scrollTarget:"#top",speed:1000})});$(".set-new-banner-image").live("ajax:error",function(f,g,e){brevidy.handle_ajax_error("banner image",g)})});